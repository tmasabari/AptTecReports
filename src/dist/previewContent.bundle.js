(()=>{"use strict";function e(e,r,a,n,o){const s=a.filter((function(e){return!0===e.isPrint}));var i="tblReport"+r,l='<table id="'+i+'" class="dataTable display" width="100%"></table>';o.append(l);const d=n?e.reportData.Data[n]:e.reportData.Data;s.filter((function(e){return e.maxLength&&e.maxLength>0})).forEach((e=>{var t,r,a;t=d,r=e.field,a=e.maxLength,t.forEach((e=>{e[r]&&e[r].length>a&&(e[r]=e[r].substring(0,a))}))}));const f={info:!1,ordering:!1,paging:!1,searching:!1,data:d,columns:t(e,s)};var c="<Style>";$("#"+i).DataTable(f);for(let e=0;e<s.length;e++){const t=s[e];var p="cssTH-"+t.field;$(`#${i} tr th:nth-child(${e+1})`).addClass(p),c+=`.${p} { ${t.TitleStyle?t.TitleStyle:""} }\n`;var h="cssTD-"+t.field;$(`#${i} tr td:nth-child(${e+1})`).addClass(h),c+=`.${h} { ${t.ContentStyle?t.ContentStyle:""} }\n`}c+="</Style>",o.append(c)}function t(e,t){t=t.map((e=>({field:"object"==typeof e?e.field:e,displayName:"object"==typeof e?e.displayName:e,columnSize:"object"==typeof e&&e.columnSize?e.columnSize:100/t.length+"%",format:"object"==typeof e&&e.format?e.format:""})));for(let r=0;r<t.length;r++){const a=t[r];if(a.data=a.field,a.title=a.displayName,a.width=a.columnSize,"object"==typeof a&&a.format){const t=a.format.toLowerCase();a.render=e.customFunctions[t]}}return t}var r=window.parent.aptTecReports;window.onload=function(){$.fn.dataTable.ext.errMode="none",$(".content .dataTable").on("error.dt",(function(e,t,r,a){console.error("An error has been reported by DataTables: ",a)}));const t=$(".content");var a=1;if(r.ReportParams.Content)for(let o=0;o<r.ReportParams.Content.length;o++){const s=r.ReportParams.Content[o];if(Object.prototype.hasOwnProperty.call(s,"ContentHtml")){var n=r.replacePlaceholders(s.ContentHtml,r.reportData.CommonData);n=r.replacePlaceholders(n,r.reportData.InstanceData),t.append(n)}else if(Object.prototype.hasOwnProperty.call(s,"TableContent")&&Array.isArray(s.TableContent)){const n=s.DataSource;e(r,a,s.TableContent,n,t),a++}}window.PagedPolyfill.preview()}})(),(()=>{class e extends window.Paged.Handler{constructor(e,t,r){super(e,t,r)}beforeParsed(e){window.parent.aptTecReports.raiseEvent("beforePreviewParsed",e)}afterRendered(e){window.parent.aptTecReports.raiseEvent("afterPreviewRendered",e)}}window.Paged.registerHandlers(e)})(),(()=>{class e extends Paged.Handler{constructor(e,t,r){super(e,t,r),this.splitTablesRefs=[]}afterPageLayout(e,t,r,a){if(this.chunker=a,this.splitTablesRefs=[],r){const t=r.node,n=this.findAllAncestors(t,"table");if("TABLE"===t.tagName&&n.push(t),n.length>0){this.splitTablesRefs=n.map((e=>e.dataset.ref));let o="THEAD"===t.tagName?t:this.findFirstAncestor(t,"thead");if(o){let e=o.hasChildNodes()?o.lastChild:o;r.node=this.nodeAfter(e,a.source)}this.hideEmptyTables(e,t)}}}hideEmptyTables(e,t){this.splitTablesRefs.forEach((r=>{let a=e.querySelector("[data-ref='"+r+"']");if(a){let e=a.querySelector("tbody > tr");if(!e||this.refEquals(e.firstElementChild,t)){a.style.visibility="hidden",a.style.position="absolute";let e=a.nextSibling;e&&(e.style.visibility="hidden",e.style.position="absolute")}}}))}refEquals(e,t){return e&&e.dataset&&t&&t.dataset&&e.dataset.ref===t.dataset.ref}findFirstAncestor(e,t){for(;e.parentNode&&1===e.parentNode.nodeType;){if(e.parentNode.matches(t))return e.parentNode;e=e.parentNode}return null}findAllAncestors(e,t){const r=[];for(;e.parentNode&&1===e.parentNode.nodeType;)e.parentNode.matches(t)&&r.unshift(e.parentNode),e=e.parentNode;return r}layout(e,t){this.splitTablesRefs.forEach((t=>{const r=e.querySelector("[data-ref='"+t+"']");if(r&&!r.getAttribute("repeated-headers")){const e=this.chunker.source.querySelector("[data-ref='"+t+"']");this.repeatColgroup(e,r),this.repeatTHead(e,r),r.setAttribute("repeated-headers",!0)}}))}repeatColgroup(e,t){let r=e.querySelectorAll("colgroup"),a=t.firstChild;r.forEach((e=>{let r=e.cloneNode(!0);t.insertBefore(r,a)}))}repeatTHead(e,t){let r=e.querySelector("thead");if(r){let e=r.cloneNode(!0);t.insertBefore(e,t.firstChild)}}nodeAfter(e,t){if(t&&e===t)return;let r=this.nextSignificantNode(e);if(r)return r;if(e.parentNode)for(;e=e.parentNode;){if(t&&e===t)return;if(r=this.nextSignificantNode(e),r)return r}}nextSignificantNode(e){for(;e=e.nextSibling;)if(!this.isIgnorable(e))return e;return null}isIgnorable(e){return 8===e.nodeType||3===e.nodeType&&this.isAllWhitespace(e)}isAllWhitespace(e){return!/[^\t\n\r ]/.test(e.textContent)}}Paged.registerHandlers(e)})();
//# sourceMappingURL=previewContent.bundle.js.map