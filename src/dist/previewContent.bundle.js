(()=>{"use strict";function e(e,r,n,a,o){const i=n.filter((function(e){return!0===e.isPrint}));var l="tblReport"+r,s='<table id="'+l+'" class="dataTable display" width="100%"></table>';o.append(s);const d=a?e.reportData.Data[a]:e.reportData.Data;i.filter((function(e){return e.maxLength&&e.maxLength>0})).forEach((e=>{var t,r,n;t=d,r=e.field,n=e.maxLength,t.forEach((e=>{e[r]&&e[r].length>n&&(e[r]=e[r].substring(0,n))}))}));const f=n.filter((function(e){return!0===e.TotalCount})),c={info:!1,ordering:!1,paging:!1,searching:!1,data:d,columns:t(e,i)};if(f&&f.length>0){c.footerCallback=function(){let e=this.api(),t=function(e){return"string"==typeof e?1*e.replace(/[^\d.-]/g,""):"number"==typeof e?e:0};for(var r=0;r<i.length;r++)if(!0===i[r].TotalCount){let n=e.column(r).data().reduce(((e,r)=>t(e)+t(r)),0);e.column(r).footer().innerHTML=n}};const e=`<tfoot><tr> ${"<th></th> ".repeat(i.length)}</tr></tfoot>`;$("#"+l).append(e)}var p="<Style>";$("#"+l).DataTable(c);for(let e=0;e<i.length;e++){const t=i[e];var h="cssTH-"+t.field;$(`#${l} tr th:nth-child(${e+1})`).addClass(h),p+=`.${h} { ${t.TitleStyle?t.TitleStyle:""} }\n`;var u="cssTD-"+t.field;$(`#${l} tr td:nth-child(${e+1})`).addClass(u),p+=`.${u} { ${t.ContentStyle?t.ContentStyle:""} }\n`}p+="</Style>",o.append(p)}function t(e,t){t=t.map((e=>({field:"object"==typeof e?e.field:e,displayName:"object"==typeof e?e.displayName:e,columnSize:"object"==typeof e&&e.columnSize?e.columnSize:100/t.length+"%",format:"object"==typeof e&&e.format?e.format:""})));for(let r=0;r<t.length;r++){const n=t[r];if(n.data=n.field,n.title=n.displayName,n.width=n.columnSize,"object"==typeof n&&n.format){const t=n.format.toLowerCase();n.render=e.customFunctions[t]}}return t}var r=window.parent.aptTecReports;window.onload=function(){$.fn.dataTable.ext.errMode="none",$(".content .dataTable").on("error.dt",(function(e,t,r,n){console.error("An error has been reported by DataTables: ",n)}));const t=$(".content");var n=1;if(r.ReportParams.Content)for(let o=0;o<r.ReportParams.Content.length;o++){const i=r.ReportParams.Content[o];if(Object.prototype.hasOwnProperty.call(i,"ContentHtml")){var a=r.replacePlaceholders(i.ContentHtml,r.reportData.CommonData);a=r.replacePlaceholders(a,r.reportData.InstanceData),t.append(a)}else if(Object.prototype.hasOwnProperty.call(i,"TableContent")&&Array.isArray(i.TableContent)){const a=i.DataSource;e(r,n,i.TableContent,a,t),n++}}window.PagedPolyfill.preview()}})(),(()=>{class e extends window.Paged.Handler{constructor(e,t,r){super(e,t,r)}beforeParsed(e){window.parent.aptTecReports.raiseEvent("beforePreviewParsed",e)}afterRendered(e){window.parent.aptTecReports.raiseEvent("afterPreviewRendered",e)}}window.Paged.registerHandlers(e)})(),(()=>{class e extends Paged.Handler{constructor(e,t,r){super(e,t,r),this.splitTablesRefs=[]}afterPageLayout(e,t,r,n){if(this.chunker=n,this.splitTablesRefs=[],r){const t=r.node,a=this.findAllAncestors(t,"table");if("TABLE"===t.tagName&&a.push(t),a.length>0){this.splitTablesRefs=a.map((e=>e.dataset.ref));let o="THEAD"===t.tagName?t:this.findFirstAncestor(t,"thead");if(o){let e=o.hasChildNodes()?o.lastChild:o;r.node=this.nodeAfter(e,n.source)}this.hideEmptyTables(e,t)}}}hideEmptyTables(e,t){this.splitTablesRefs.forEach((r=>{let n=e.querySelector("[data-ref='"+r+"']");if(n){let e=n.querySelector("tbody > tr");if(!e||this.refEquals(e.firstElementChild,t)){n.style.visibility="hidden",n.style.position="absolute";let e=n.nextSibling;e&&(e.style.visibility="hidden",e.style.position="absolute")}}}))}refEquals(e,t){return e&&e.dataset&&t&&t.dataset&&e.dataset.ref===t.dataset.ref}findFirstAncestor(e,t){for(;e.parentNode&&1===e.parentNode.nodeType;){if(e.parentNode.matches(t))return e.parentNode;e=e.parentNode}return null}findAllAncestors(e,t){const r=[];for(;e.parentNode&&1===e.parentNode.nodeType;)e.parentNode.matches(t)&&r.unshift(e.parentNode),e=e.parentNode;return r}layout(e,t){this.splitTablesRefs.forEach((t=>{const r=e.querySelector("[data-ref='"+t+"']");if(r&&!r.getAttribute("repeated-headers")){const e=this.chunker.source.querySelector("[data-ref='"+t+"']");this.repeatColgroup(e,r),this.repeatTHead(e,r),r.setAttribute("repeated-headers",!0)}}))}repeatColgroup(e,t){let r=e.querySelectorAll("colgroup"),n=t.firstChild;r.forEach((e=>{let r=e.cloneNode(!0);t.insertBefore(r,n)}))}repeatTHead(e,t){let r=e.querySelector("thead");if(r){let e=r.cloneNode(!0);t.insertBefore(e,t.firstChild)}}nodeAfter(e,t){if(t&&e===t)return;let r=this.nextSignificantNode(e);if(r)return r;if(e.parentNode)for(;e=e.parentNode;){if(t&&e===t)return;if(r=this.nextSignificantNode(e),r)return r}}nextSignificantNode(e){for(;e=e.nextSibling;)if(!this.isIgnorable(e))return e;return null}isIgnorable(e){return 8===e.nodeType||3===e.nodeType&&this.isAllWhitespace(e)}isAllWhitespace(e){return!/[^\t\n\r ]/.test(e.textContent)}}Paged.registerHandlers(e)})();
//# sourceMappingURL=previewContent.bundle.js.map